var documenterSearchIndex = {"docs":
[{"location":"api/#Library-Reference","page":"Library Reference","title":"Library Reference","text":"","category":"section"},{"location":"api/","page":"Library Reference","title":"Library Reference","text":"Modules = [ACSets]","category":"page"},{"location":"#ACSets.jl","page":"ACSets.jl","title":"ACSets.jl","text":"","category":"section"},{"location":"","page":"ACSets.jl","title":"ACSets.jl","text":"CurrentModule = ACSets","category":"page"},{"location":"","page":"ACSets.jl","title":"ACSets.jl","text":"ACSets.jl is a Julia library for...","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"EditURL = \"https://github.com/AlgebraicJulia/ACSets.jl/blob/main/docs/literate/json_serialization.jl\"","category":"page"},{"location":"generated/json_serialization/#Serializing-acsets-as-JSON","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"","category":"section"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"Catlab supports the serialization of attributed C-sets (acsets) into JSON with their schemas. This functionality should allow you to interoperate with database representations in other languages by serializing both the data and the type into a network interoperability layer.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"import JSON, JSONSchema\n\nusing ACSets","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"You can interact with the schema representation using JSON Schema with the write_json_acset_schema and read_json_acset_schema functions.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"function roundtrip_json_acset_schema(schema)\n  mktempdir() do dir\n    path = joinpath(dir, \"schema.json\")\n    write_json_acset_schema(schema, path)\n    read_json_acset_schema(path)\n  end\nend","category":"page"},{"location":"generated/json_serialization/#The-JSONSchema-for-Schemas","page":"Serializing acsets as JSON","title":"The JSONSchema for Schemas","text":"","category":"section"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"The following code shows how to view the schema for storing schemas. You can see that this data is encoded in the standardized JSONSchema format, which is a generic way of representing data structures that are serialized to JSON. Notice that there are properties for Homs and Obs. The Homs have fields like name, dom, and codom. The Obs just have a name. AttrTypes are like Obs, but they store the name of the type that the attribute can have. In Julia, the Schemas are parametric in the AttrTypes so that uses can set those types at instance creation time. Attrs are the names of columns that point into the AttrTypes.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"json_schema = JSONSchema.Schema(acset_schema_json_schema())\nJSON.print(json_schema, 2)","category":"page"},{"location":"generated/json_serialization/#Example-1:-Discrete-Dynamical-Systems","page":"Serializing acsets as JSON","title":"Example 1: Discrete Dynamical Systems","text":"","category":"section"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"Here is an example of an ACSet schema for Discrete Dynamical Systems. A DDS is just a set X whose elements we call states, and a function next, which take the current state and gives you the next state. Such systems are used to model processes that occur autonomously and are the simplest possible dynamical system.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"SchDDS = BasicSchema([:X], [(:next,:X,:X)])\n\nJSON.print(generate_json_acset_schema(SchDDS), 2)","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"LabeledDDS are a variation on DDS where the states can have symbolic names. In Catlab, every element of an object has to be identified by its integer row number. This comes out of a tradition in database design where every table has a natural number primary key. In mathematics, we often want to think of the state space not as a set of integers, but as an arbitrary set. In Catlab, we call that set the Labels and use a label attribute to implement the mapping of state numbers to state labels. This way the underlying database implementation can still be designed aroung natural number primary keys, but the user can use symbolic labels. Note also that this shows the schema inheritance. We state that a SchLabeledDDS inherits from SchDDS by adding a label attribute of type Label.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"SchLabeledDDS = BasicSchema([:X], [(:next,:X,:X)],\n                            [:Label], [(:label,:X,:Label)])\n\nJSON.print(generate_json_acset_schema(SchLabeledDDS), 2)","category":"page"},{"location":"generated/json_serialization/#Example-2:-Labeled-DDS","page":"Serializing acsets as JSON","title":"Example 2: Labeled DDS","text":"","category":"section"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"With the LabeledDDS, we will create an instance by specifying data that fits the schema. Then we will create the JSON output to show how it is encoded. The JSON encoded schema above tells you how to read the JSON encoded data below. You can see that the LabeledDDS will have a set for X with a Hom for next and an attribute for label. Thus we can expect to see the JSON encoding of a single table database below:     1. The first level of JSON is keyed by the table names     2. Each Table is an array of rows     3. Each row is an object keyed by fields. This is the simplest way to put a relational database in a JSON document. It is a little redundant, because the field names are repeated for each row. But that makes it easy to emit and easy to parse. If this becomes a problem, we can upgrade to a more efficient representation by writing more sophisticated parsers. Something like https://github.com/JuliaIO/MsgPack.jl would be appropriate.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"@acset_type LabeledDDS(SchLabeledDDS, index=[:next, :label])\n\nldds = LabeledDDS{Int}()\nadd_parts!(ldds, :X, 4, next=[2,3,4,1], label=[100, 101, 102, 103])\nJSON.print(generate_json_acset(ldds),2)","category":"page"},{"location":"generated/json_serialization/#Example-3:-Graphs","page":"Serializing acsets as JSON","title":"Example 3: Graphs","text":"","category":"section"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"Relational databases are great, because they are capable of representing almost anything that can be stored on a computer. We move up to graphs, which is a nice data structure you have probably seen before. Notably, graphs have two tables, one for edges and one for vertices. These are the category theorist's graph, which means that they support multiple parallel edges and self-loops.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"# Syntax available in Catlab:\n# @present SchGraph(FreeSchema) begin\n#   V::Ob\n#   E::Ob\n#   src::Hom(E,V)\n#   tgt::Hom(E,V)\n# end\n\nSchGraph = BasicSchema([:V,:E], [(:src,:E,:V),(:tgt,:E,:V)])\n\nJSON.print(generate_json_acset_schema(SchGraph), 2)","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"An example graph with 4 vertices and 2 edges.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"@acset_type Graph(SchGraph, index=[:src, :tgt])\n\ng = Graph()\nadd_parts!(g, :V, 4)\nadd_parts!(g, :E, 2, src=[1,2], tgt=[2,3])","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"Note that the vertices are listed out in a somewhat silly way. They are given as a table with no columns, so they show up in the JSON as a bunch of empty objects. This is for consistency with our next example.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"JSON.print(generate_json_acset(g), 2)","category":"page"},{"location":"generated/json_serialization/#Example-4:-Vertex-and-Edge-Labeled-Graph-Graph-Schema","page":"Serializing acsets as JSON","title":"Example 4: Vertex and Edge Labeled Graph Graph Schema","text":"","category":"section"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"You can extend schemas by adding more tables and columns. This inheritance is flattened when you serialize to JSON, but could be encoded in a future version.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"# Syntax available in Catlab:\n# @present SchVELabeledGraph <: SchGraph begin\n#    Label::AttrType\n#    vlabel::Attr(V,Label)\n#    elabel::Attr(E,Label)\n# end\n\nSchVELabeledGraph = BasicSchema([:V,:E], [(:src,:E,:V),(:tgt,:E,:V)],\n  [:Label], [(:vlabel,:V,:Label),(:elabel,:E,:Label)])\n\nJSON.print(generate_json_acset_schema(SchVELabeledGraph), 2)","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"An example labeled graph using symbols for the vertex and edge names. Note that you can use unicode symbols in Julia.","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"@acset_type VELabeledGraph(SchVELabeledGraph, index=[:src,:tgt])\n\nlg = VELabeledGraph{Symbol}()\nadd_parts!(lg, :V, 4, vlabel=[:a, :b, :c, :d])\nadd_parts!(lg, :E, 2, src=[1,2], tgt=[2,3], elabel=[:e₁, :e₂])","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"This Graph is represented by the following JSON. Now you can see that the vertices have their vlabels","category":"page"},{"location":"generated/json_serialization/","page":"Serializing acsets as JSON","title":"Serializing acsets as JSON","text":"JSON.print(generate_json_acset(lg), 2)","category":"page"}]
}
