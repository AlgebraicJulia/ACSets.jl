{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$defs": {
    "Const": {
      "oneOf": [
        {
          "$ref": "#/$defs/ConstStr"
        },
        {
          "$ref": "#/$defs/ConstInt"
        },
        {
          "$ref": "#/$defs/ConstBool"
        }
      ]
    },
    "ConstStr": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "ConstStr"
        },
        "val": {
          "type": "string",
          "$comment": "Str"
        }
      },
      "required": [
        "val"
      ]
    },
    "ConstInt": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "ConstInt"
        },
        "val": {
          "type": "integer",
          "$comment": "I32",
          "minimum": -2147483648,
          "maximum": 2147483647
        }
      },
      "required": [
        "val"
      ]
    },
    "ConstBool": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "ConstBool"
        },
        "val": {
          "type": "boolean",
          "$comment": "Boolean"
        }
      },
      "required": [
        "val"
      ]
    },
    "Term": {
      "oneOf": [
        {
          "$ref": "#/$defs/Constant"
        },
        {
          "$ref": "#/$defs/Plus"
        },
        {
          "$ref": "#/$defs/Times"
        },
        {
          "$ref": "#/$defs/IfThenElse"
        }
      ]
    },
    "Constant": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "Constant"
        },
        "val": {
          "$ref": "#/$defs/Const"
        }
      },
      "required": [
        "val"
      ]
    },
    "Plus": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "Plus"
        },
        "terms": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Term"
          }
        }
      },
      "required": [
        "terms"
      ]
    },
    "Times": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "Times"
        },
        "terms": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/Plus"
          }
        }
      },
      "required": [
        "terms"
      ]
    },
    "IfThenElse": {
      "type": "object",
      "properties": {
        "tag": {
          "const": "IfThenElse"
        },
        "ifcase": {
          "$ref": "#/$defs/Term"
        },
        "thencase": {
          "$ref": "#/$defs/Term"
        },
        "elsecase": {
          "$ref": "#/$defs/Term"
        }
      },
      "required": [
        "ifcase",
        "thencase",
        "elsecase"
      ]
    },
    "Assignment": {
      "type": "object",
      "properties": {
        "lhs": {
          "type": "string",
          "$comment": "Str"
        },
        "rhs": {
          "$ref": "#/$defs/Term"
        }
      },
      "required": [
        "lhs",
        "rhs"
      ]
    }
  }
}